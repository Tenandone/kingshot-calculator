<!-- pages/calculator.html (최적화 본) -->
<!doctype html>
<html lang="ko">
<head>
  
  <meta charset="utf-8">
  <meta name="robots" content="noindex,nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>건물 계산기 | KingshotData KR</title>
  <!-- 스타일은 /css/calculator.css?v=202509120604 로 분리 (app.js에서 ensureCSS로 로드) -->
</head>
<body>
  <main id="calc-ui" class="calc-wrap" aria-labelledby="calc-title">
    <section class="calc-card">
      <h2 id="calc-title" class="calc-title">건물 계산기</h2>
      <p class="calc-desc">업그레이드에 필요한 자원과 소요 시간을 확인하세요.</p>

      <h3 class="calc-desc">사용 방법</h3>
      <ol class="calc-desc" style="margin-left:18px">
        <li>업그레이드할 건물을 선택하세요.</li>
        <li>현재 레벨과 목표 레벨을 입력하세요.</li>
        <li>
          건설 속도 보너스를 입력하세요.<br>
          <span class="help">프로필 → 전투력(파워) 화면 하단에서 건설 속도 보너스를 확인하세요.
          (살로/늑대/연구/국왕·관직 등 모두 포함)</span>
        </li>
        <li>도시센터를 업그레이드하는 경우 "선행 건물 포함" 옵션을 체크할 수 있습니다.</li>
        <li>펫 버프 비활성화시 펫 버프를 추가 할 수 있으며, 법령버프는 수동으로 체크하여야 합니다.</li>
      </ol>

      <h3 class="calc-desc">레벨 가이드</h3>
      <ul class="calc-desc" style="margin-left:18px">
        <li>TG 1 = Lv. 35</li><li>TG 2 = Lv. 40</li><li>TG 3 = Lv. 45</li><li>TG 4 = Lv. 50</li><li>TG 5 = Lv. 55</li>
      </ul>
    </section>

    <!-- Form -->
    <section class="calc-card" style="margin-top:14px">
      <form id="calc-form" class="calc-form" onsubmit="return false;">
        <div class="form-group">
          <label for="building">건물 선택</label>
          <select id="building" name="building">
            <option value="towncenter">도시센터</option>
            <option value="embassy">대사관</option>
            <option value="command">지휘부</option>
            <option value="barracks">보병대</option>
            <option value="stable">기병대</option>
            <option value="range">궁병대</option>
            <option value="academy">아카데미</option>
            <option value="infirmary">야전병원</option>
          </select>
        </div>

        <div class="form-group">
          <label for="startLevel">현재 레벨</label>
          <input type="number" id="startLevel" name="startLevel" min="1" max="55" value="1" placeholder="현재 레벨 입력">
        </div>

        <div class="form-group">
          <label for="targetLevel">목표 레벨</label>
          <input type="number" id="targetLevel" name="targetLevel" min="1" max="55" value="1" placeholder="목표 레벨 입력">
        </div>

        <div class="form-group">
          <label for="speedBonus">건설 속도 보너스 (%)</label>
          <input type="number" id="speedBonus" name="speedBonus" min="0" max="100" value="0" placeholder="0">
        </div>

        <div class="form-group">
          <label for="saulBonus">살로 스킬 보너스 (%) — 건설 비용 적용</label>
          <input type="number" id="saulBonus" name="saulBonus" min="0" max="100" value="0" placeholder="0">
        </div>

        <div class="form-group">
          <label for="wolfBonus">늑대 스킬 보너스 (%)</label>
          <input type="number" id="wolfBonus" name="wolfBonus" min="0" max="100" value="0" placeholder="0">
        </div>

        <div class="form-group">
          <label for="positionBonus">국왕/관직 보너스 (%)</label>
          <input type="number" id="positionBonus" name="positionBonus" min="0" max="100" value="0" placeholder="0">
        </div>

        <div class="form-check">
          <input type="checkbox" id="doubleTime" name="doubleTime" aria-describedby="doubleTimeHelp">
          <label for="doubleTime">건설 법령 적용(시간 20% 감소)</label>
        </div>

        <div class="form-check">
          <input type="checkbox" id="includePrereq" name="includePrereq" aria-controls="prereq-details">
          <label for="includePrereq">선행 건물 포함</label>
        </div>

        <!-- 선행 건물 레벨 입력 (토글) -->
        <details id="prereq-details" class="collapsible" hidden>
          <summary>선행 건물 레벨 (내 현재 레벨)</summary>
          <div class="collapsible-body">
            <div class="calc-grid">
              <div class="form-group">
                <label for="prereqAcademy">아카데미</label>
                <input type="number" id="prereqAcademy" min="1" max="55" placeholder="예: 25" inputmode="numeric">
              </div>
              <div class="form-group">
                <label for="prereqRange">궁병대</label>
                <input type="number" id="prereqRange" min="1" max="55" placeholder="예: 20" inputmode="numeric">
              </div>
              <div class="form-group">
                <label for="prereqStable">기병대</label>
                <input type="number" id="prereqStable" min="1" max="55" placeholder="예: 20" inputmode="numeric">
              </div>
              <div class="form-group">
                <label for="prereqBarracks">보병대</label>
                <input type="number" id="prereqBarracks" min="1" max="55" placeholder="예: 20" inputmode="numeric">
              </div>
              <div class="form-group">
                <label for="prereqEmbassy">대사관</label>
                <input type="number" id="prereqEmbassy" min="1" max="55" placeholder="예: 15" inputmode="numeric">
              </div>
            </div>
            <p class="help" style="margin-top:10px">* 비워두면 0으로 간주합니다.</p>
          </div>
        </details>

        <div class="btn-row">
          <button type="button" id="calcBtn" class="btn btn-primary">업그레이드 계산하기</button>          
          <button type="button" id="clearPlanBtn" class="btn">업그레이드 초기화</button>
        </div>
      </form>
    </section>

    <!-- 선행 조건 표시 (calculator.js의 renderPrereqBox 사용) -->
    <section class="calc-card" style="margin-top:14px" id="prereq-box">
      <h2 class="calc-title" style="font-size:18px">선행 조건</h2>
      <ul id="prereq-list"></ul>
    </section>

    <!-- Result -->
    <section class="calc-card" style="margin-top:14px">
      <div id="result" aria-live="polite"></div>
    </section>
  </main>

  <!-- ⚠️ 스크립트는 app.js가 라우트에서 동적 로드함. 여기선 포함하지 않음. -->
  <!-- 토글/셀렉터 공개 로직도 calculator.js로 이동해두는 걸 권장 -->
</body>
</html>
